<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ToDoリスト</title>
  <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
  <section class="todo">
    <h1>ToDoリスト</h1>
    <form>
      <div class="todo-task">
        <input type="radio" name="task" value="all" checked><label>すべて</label>
        <input type="radio" name="task" value="wip""><label>作業中</label>
        <input type="radio" name="task" value="done"><label>完了</label>  
      </div>
      <table class="todo-list">
        <thead>
          <tr>
            <th>ID</th>
            <th>コメント</th>
            <th>状態</th>
            <th></th>
          </tr>  
        </thead>
        <tbody id="list">
        </tbody>
      </table>
      <div class="todo-add">
        <h2>新規タスクの追加</h2>
        <input type="text" id="text">
        <button type="button" id="btn">実行</button>
      </div>
    </form>
  </section>
  <script>
(function () {
    const list = document.getElementById('list');
    const text = document.getElementById('text');
    const btn = document.getElementById('btn');
    const todos = [];
    btn.addEventListener('click', () => {
      const todo = {
        index: todos.length,
        task: text.value,
        status: '作業中',
        del: '削除'
      }
      todos.push(todo);
      dislayTodos(todos);
    });
    const dislayTodos = (todos) => {
      while (list.firstChild) list.removeChild(list.firstChild);
      for(let todo in todos) {
        const elm = document.createElement('tr');
        for(let key in todos[todo]) {
          if(key == 'status' || key == 'del') {
            const td = document.createElement('td');
            const btn = document.createElement('button');
            btn.textContent = todos[todo][key];
            td.appendChild(btn);
            elm.appendChild(td);
          } else {
            const td = document.createElement('td');
            td.textContent = todos[todo][key];
            elm.appendChild(td);
          }
        }
        list.appendChild(elm);
      }
      text.value = '';
    }
  }());
  </script>
</body>
</html>
